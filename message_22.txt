local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()

local Window = OrionLib:MakeWindow({Name = "fling vex and sup", HidePremium = false, SaveConfig = true, ConfigFolder = "OrionTest", IntroText = false})

local Main = Window:MakeTab({
    Name = "Main",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local Tab1 = Window:MakeTab({
    Name = "Player",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})


local Tab3 = Window:MakeTab({
    Name = "SpyChat",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

--ФУНКЦИИ
Tab1:AddSlider({
    Name = "Speed Players",
    Min = 16,
    Max = 100,
    Default = 5,
    Color = Color3.fromRGB(255,255,255),
    Increment = 1,
    ValueName = "Speed Value",
    Callback = function(speed)
        HackedWalkSpeed = speed

        local Plrs = game:GetService("Players")
        local MyPlr = Plrs.LocalPlayer
        local MyChar = MyPlr.Character

        if MyChar then
            local Hum = MyChar.Humanoid
            Hum.Changed:connect(function()
                Hum.WalkSpeed = HackedWalkSpeed
            end)
            Hum.WalkSpeed = HackedWalkSpeed
        end

        MyPlr.CharacterAdded:connect(function(Char)
            MyChar = Char
            repeat wait() until Char:FindFirstChild("Humanoid")
            local Hum = Char.Humanoid
            Hum.Changed:connect(function()
                Hum.WalkSpeed = HackedWalkSpeed
            end)
            Hum.WalkSpeed = HackedWalkSpeed
        end)
    end
})

Tab3:AddToggle({
    Name = "Spy",
    Default = false,
    Callback = function(Value)
        local enabled = Value
        local spyOnMyself = true 
        local public = false 
        local publicItalics = true 
        local privateProperties = { 
            Color = Color3.fromRGB(0, 179, 255), 
            Font = Enum.Font.SourceSans,
            TextSize = 16,
        }

        local StarterGui = game:GetService("StarterGui")
        local Players = game:GetService("Players")
        local player = Players.LocalPlayer or Players:GetPropertyChangedSignal("LocalPlayer"):Wait() or Players.LocalPlayer
        local saymsg = game:GetService("ReplicatedStorage"):WaitForChild("DefaultChatSystemChatEvents"):WaitForChild("SayMessageRequest")
        local getmsg = game:GetService("ReplicatedStorage"):WaitForChild("DefaultChatSystemChatEvents"):WaitForChild("OnMessageDoneFiltering")
        local instance = (_G.chatSpyInstance or 0) + 1
        _G.chatSpyInstance = instance

        local function onChatted(p, msg)
            if _G.chatSpyInstance == instance then
                if p == player and msg:lower():sub(1, 4) == "/spy" then
                    enabled = not enabled
                    wait(0.3)
                    privateProperties.Text = "{SECRET " .. (enabled and "EN" or "DIS") .. "ABLED}"
                    StarterGui:SetCore("ChatMakeSystemMessage", privateProperties)
                elseif enabled and (spyOnMyself == true or p ~= player) then
                    msg = msg:gsub("[\n\r]", ''):gsub("\t", ' '):gsub("[ ]+", ' ')
                    local hidden = true
                    local conn = getmsg.OnClientEvent:Connect(function(packet, channel)
                        if packet.SpeakerUserId == p.UserId and packet.Message == msg:sub(#msg - #packet.Message + 1) and (channel == "All" or (channel == "Team" and public == false and Players:GetPlayerFromCharacter(packet.Character) and Players:GetPlayerFromCharacter(packet.Character).Team == player.Team)) then
                            hidden = false
                        end
                    end)
                    wait(0.25) -- Reduced the wait time to 0.25 seconds
                    conn:Disconnect()
                    if hidden and enabled then
                        if public then
                            saymsg:FireServer((publicItalics and "/me " or '') .. "{SECRET} [" .. p.Name .. "]: " .. msg, "All")
                        else
                            privateProperties.Text = "{SECRET} [" .. p.Name .. "]: " .. msg
                            StarterGui:SetCore("ChatMakeSystemMessage", privateProperties)
                        end
                    end
                end
            end
        end

        for _, p in ipairs(Players:GetPlayers()) do
            p.Chatted:Connect(function(msg) onChatted(p, msg) end)
        end

        Players.PlayerAdded:Connect(function(p)
            p.Chatted:Connect(function(msg) onChatted(p, msg) end)
        end)

        privateProperties.Text = "{SECRET " .. (enabled and "EN" or "DIS") .. "ABLED}"
        StarterGui:SetCore("ChatMakeSystemMessage", privateProperties)

        if not player.PlayerGui:FindFirstChild("Chat") then
            wait(3)
        end

        local chatFrame = player.PlayerGui.Chat.Frame
        chatFrame.ChatChannelParentFrame.Visible = true
        chatFrame.ChatBarParentFrame.Position = chatFrame.ChatChannelParentFrame.Position + UDim2.new(UDim.new(), chatFrame.ChatChannelParentFrame.Size.Y)
    end    
})

